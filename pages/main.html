<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../assets/styles/main.css" type="text/css" rel="stylesheet">
    <title>WE ARE HELMET JO</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="icon" href="../assets/images/favicon.svg">

    <style>
        body {
            visibility: hidden;
        }
    </style>
</head>

<body id="intro">
    <div id="header"></div>
    <!-- ì¸íŠ¸ë¡œ -->
    <div id="intro-div">
        <h2>INTRO</h2>
        <div class="container d-flex justify-content-center mt-3">
            <div class="main-content w-50">
                <div class="p-3 mb-2 text-center rounded-5 shadow-lg"
                    style="background-color: #FADADD; border-radius: 20px !important;">
                    <div class="container-fluid py-3">
                        <h1 class="display-5 fw-bold">WE ARE HELMET JO</h1>
                        <p class="col-md-8 mx-auto fs-5">
                            Our team has chosen the slogan "We Charge Forward."<br>
                            No matter what challenges come our way, the five of us will tackle them head-on with our
                            helmets. <br>
                            We are ready to take on any challenge. <br>
                            Thank you! ğŸš€ğŸ’ªğŸ’ªğŸ’ªğŸ’ªğŸ’ª
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ì†Œê°œ -->
    <div id="helmet">
        <h2>HELMET </h2>
        <div class="container w-75 mt-4">
            <div class="row row-cols-1 row-cols-md-3 g-4">
                <div class="col align-self-stretch">
                    <h3 class="text-center">Our Team Rules</h3>
                    <div class="card h-100 shadow-lg" style="background-color: #f7e4e5;">
                        <div class="card-body">
                            <h5 class="card-title text-center">ìš°ë¦¬íŒ€ ê·œì¹™</h5>
                            <p class="card-text text-start">
                                â° ì‹œê°„ ì•½ì† ì§€í‚¤ê¸°!<br>
                                ğŸ’¬ ì†Œí†µê³¼ ê³µìœ í•˜ê¸°!<br>
                                ğŸ¤ ë¬¸ì œ í•´ê²°ì— ì§‘ì¤‘í•˜ê¸°!<br>
                                ğŸ–¥ï¸ í˜‘ì—…ì„ ìœ„í•´ í™”ë©´ ê³µìœ í•˜ê¸°!<br>
                                ğŸ’ª ê±´í”¼ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.<br>
                                ğŸ“… ìŠ¤í¬ëŸ¼ ì‹œê°„ <br>
                                â° ì˜¤ì „ 9ì‹œ, ì˜¤í›„ 2ì‹œ, ì˜¤í›„ 8ì‹œ 30ë¶„ì„ ë°˜ë“œì‹œ ì§€í‚¤ê² ìŠµë‹ˆë‹¤.<br>
                                ğŸ“¢ ìŠ¤í¬ëŸ¼ ë¯¸ì°¸ì—¬ ì‹œ ë°˜ë“œì‹œ ë¯¸ë¦¬ ì•Œë ¤ì£¼ê² ìŠµë‹ˆë‹¤.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col align-self-stretch">
                    <h3 class="text-center">TMI</h3>
                    <div class="card h-100 shadow-lg p-3" style="background-color: #f7e4e5;">
                        <div class="row">
                            <div class="col-6">
                                <img src="../assets/images/tmi/dog1.png" class="card-img-top w-100" alt="...">
                            </div>
                            <div class="col-6">
                                <img src="../assets/images/tmi/dog2.png" class="card-img-top w-100" alt="...">
                            </div>
                            <div class="col-12 text-center">
                                <img src="../assets/images/tmi/minha.png" class="card-img-top w-50" alt="...">
                            </div>
                            <div class="col-6">
                                <img src="../assets/images/tmi/yang1.png" class="card-img-top w-100" alt="...">
                            </div>
                            <div class="col-6">
                                <img src="../assets/images/tmi/yang2.png" class="card-img-top w-100" alt="...">
                            </div>
                            <div class="col-6">
                                <img src="../assets/images/tmi/yang3.png" class="card-img-top w-100" alt="...">
                            </div>
                            <div class="col-6">
                                <img src="../assets/images/tmi/yang4.png" class="card-img-top w-100" alt="...">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col align-self-stretch">
                    <h3 class="text-center">Ultimate Goal</h3>
                    <div class="card h-100 shadow-lg" style="background-color: #f7e4e5;">
                        <div class="card-body">
                            <h5 class="card-title text-center">ë³µ ë¬´ ì‹  ì¡°</h5>
                            <p class="card-text">
                                ğŸ“† í•˜ë‚˜. ë§¤ì¼ ì¼ì • ì†Œí™”í•˜ë ¤ê³  ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤.<br>
                                ğŸ™‹â€â™‚ï¸ ë‘˜. ë¶€ë„ëŸ¬ì›Œë„ ë¬¼ì–´ë³´ë ¤ê³  ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤. <br>
                                ğŸ“ ì…‹. TIL ë§¤ì¼ ì“°ë„ë¡ ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤. <br>
                                ğŸ¯ ë„·. ìˆ˜ë£Œê¹Œì§€ í™”ì´íŒ…í•˜ê² ìŠµë‹ˆë‹¤.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- ë©¤ë²„ ì¹´ë“œ -->
    <div id="memberCard">
        <h2>MEMBER CARD </h2>
        <div class="container" id="memberCardList">
            <div class="row row-cols-1 row-cols-md-5 g-4 justify-content-center"></div>
        </div>
    </div>

    <div id="footer"></div>

    <!-- JavaScript ì½”ë“œëŠ” BODY ë§¨ ì•„ë˜ì— ë°°ì¹˜ -->
    <script type="module">
        import { app, db, collection, getDocs, query, orderBy } from '../assets/js/firebase-config.js';

        (async () => {
            const q = query(collection(db, "member"), orderBy("reg_dt", "desc"));
            const docs = await getDocs(q);

            if (docs.size == 0) {
                const html = `
                    <div class="text-center p-5">
                        <p>ë“±ë¡ëœ ë©¤ë²„ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>`;
                document.querySelector('#memberCardList .row').innerHTML = html;
            } else {
                docs.forEach((doc) => {
                    let row = doc.data();

                    const html = `
                        <div class="col member-card" data-id=${doc.id}>
                            <div class="card h-100 text-center shadow-lg p-3 bg-light rounded-4">
                                <img src="${row['img']}" class="rounded-circle mx-auto mt-3" alt="${row['name']}">
                                <div class="card-body">
                                    <h5 class="card-title">${row['name']}</h5>
                                    <p class="card-text">${row['mbti']}</p>
                                    <p class="text-muted">${row['blog'] ? `
                                        <a href="${row['blog']}" target="_blank" onclick="event.stopPropagation()">BLOG</a>` : 'BLOG ì—†ìŒ'}
                                    </p>
                                    <p class="text-muted">${row['contact'] || 'ì „í™”ë²ˆí˜¸ ì—†ìŒ'}</p>
                                    <p class="text-muted">${row['email'] || 'ì´ë©”ì¼ ì—†ìŒ'}</p>
                                </div>
                            </div>
                        </div>`;

                    document.querySelector('#memberCardList .row').insertAdjacentHTML('beforeend', html);
                });

                // ë©¤ë²„ ì¹´ë“œ í´ë¦­ ì‹œ í•´ë‹¹ í˜ì´ì§€ë¡œ ì´ë™
                document.querySelectorAll('.member-card').forEach(card => {
                    card.addEventListener('click', function () {
                        const memberId = this.dataset.id;
                        location.href = `/pages/member.html?id=${memberId}`;
                    });
                });
            }

            scrollToHashElement()
        })();

        // scroll í•¨ìˆ˜
        function scrollToHashElement() {
            if (location.hash) {
                const target = document.querySelector(location.hash);
                if (target) {
                    const headerOffset = 60;
                    const elementPosition = target.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.scrollY - headerOffset;

                    window.scrollTo({
                        top: offsetPosition,
                        behavior: "smooth"
                    });
                }
                setActive()
            }
        }

        // F5 ëˆ„ë¥´ë©´ ìƒˆë¡œ ë¡œë”©
        document.addEventListener('keydown', function (event) {
            if (event.key === 'F5' || event.keyCode === 116) {
                event.preventDefault();
                window.location.href = 'main.html#intro';
            }
        });

        window.addEventListener('hashchange', (e) => {
            e.preventDefault
            scrollToHashElement()
        });
    </script>

    <script>
        $(function () {
            // header ë¡œë“œ í›„
            $("#header").load("common/header.html", function () {
                // header ë‚´ë¶€ì˜ .menu ìš”ì†Œ ë¶„ë¦¬(detach)
                const menu = $("#header .menu").detach();
                // header ì•„ë˜ì— .menu ì¶”ê°€
                $("#header").after(menu);
                // footer ë¡œë“œ í›„ body í‘œì‹œ
                $("#footer").load("common/footer.html", function () {
                    $("body").css("visibility", "visible");
                });
            });
        });
    </script>

    <script>
        // ê°ì‹œí•  ì„¹ì…˜ë“¤ì„ ì„ íƒ (ê° ì„¹ì…˜ì— ê³ ìœ í•œ idê°€ ìˆì–´ì•¼ í•¨)
        const sections = document.querySelectorAll('#intro-div, #helmet, #memberCard');

        // Intersection Observer ì˜µì…˜ (50% ì´ìƒ ë³´ì´ë©´ activeë¡œ ì²˜ë¦¬)
        const options = {
            root: null,
            rootMargin: '0px',
            threshold: 0.5
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                // ì„¹ì…˜ì´ í™”ë©´ì— 50% ì´ìƒ ë³´ì´ë©´ í•´ë‹¹ idë¥¼ ì´ìš©í•´ ë„¤ë¹„ê²Œì´ì…˜ active ì²˜ë¦¬
                if (entry.isIntersecting) {
                    const id = entry.target.getAttribute('id');
                    // ëª¨ë“  ë„¤ë¹„ê²Œì´ì…˜ ë§í¬ì˜ active ì œê±°
                    document.querySelectorAll('.menu a').forEach(link => {
                        link.classList.remove('active');
                        // hrefì— í•´ë‹¹ idê°€ í¬í•¨ë˜ë©´ active ì¶”ê°€
                        if (link.getAttribute('href').includes('#' + id.replace('-div', ''))) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, options);

        // ê° ì„¹ì…˜ ê´€ì°° ì‹œì‘
        sections.forEach(section => {
            observer.observe(section);
        });
    </script>
</body>

</html>